{% extends 'builder/base.html' %} {% load static %} {% block title %}Create
Professional CV - CV Builder Pro{% endblock %} {% block extra_css %}
<style>
  :root {
    --primary-color: #2563eb;
    --secondary-color: #64748b;
    --background-color: #f8fafc;
    --card-background: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --border-color: #e2e8f0;
    --success-color: #10b981;
    --warning-color: #f59e0b;
  }

  .cv-builder-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  .cv-builder-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .cv-builder-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .cv-builder-header p {
    font-size: 1.125rem;
    color: var(--text-secondary);
  }

  .cv-builder-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    min-height: 80vh;
  }

  .cv-form-panel {
    background: var(--card-background);
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  .cv-form-header {
    background: linear-gradient(135deg, var(--primary-color), #3b82f6);
    color: white;
    padding: 1.5rem;
  }

  .cv-form-header h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
  }

  .cv-form-body {
    padding: 2rem;
  }

  .form-section {
    margin-bottom: 2rem;
  }

  .form-section h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--border-color);
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .form-group {
    margin-bottom: 1rem;
  }

  .form-label {
    display: block;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.2s;
  }

  .form-control:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  }

  .form-textarea {
    min-height: 100px;
    resize: vertical;
  }

  .form-select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 1rem;
    background-color: white;
  }

  .btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    display: inline-block;
  }

  .btn-primary {
    background-color: var(--primary-color);
    color: white;
  }

  .btn-primary:hover {
    background-color: #1d4ed8;
  }

  .btn-outline {
    background-color: transparent;
    color: var(--primary-color);
    border: 1px solid var(--primary-color);
  }

  .btn-outline:hover {
    background-color: var(--primary-color);
    color: white;
  }

  .btn-sm {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
  }

  .cv-preview-panel {
    background: var(--card-background);
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    position: sticky;
    top: 2rem;
    height: fit-content;
  }

  .cv-preview-header {
    background: linear-gradient(135deg, var(--success-color), #059669);
    color: white;
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .cv-preview-header h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
  }

  .cv-preview-body {
    padding: 2rem;
    min-height: 600px;
  }

  .cv-template {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    line-height: 1.6;
  }

  .cv-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border-color);
  }

  .cv-name {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
  }

  .cv-title {
    font-size: 1.25rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
  }

  .cv-contact {
    color: var(--text-secondary);
    font-size: 0.9rem;
  }

  .cv-section {
    margin-bottom: 1.5rem;
  }

  .cv-section-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
    padding-bottom: 0.25rem;
    border-bottom: 1px solid var(--border-color);
  }

  .cv-summary {
    color: var(--text-secondary);
    font-size: 0.95rem;
  }

  .cv-experience-item,
  .cv-education-item {
    margin-bottom: 1rem;
  }

  .cv-experience-title,
  .cv-education-title {
    font-weight: 600;
    color: var(--text-primary);
  }

  .cv-experience-company,
  .cv-education-school {
    color: var(--primary-color);
    font-size: 0.9rem;
  }

  .cv-experience-duration,
  .cv-education-duration {
    color: var(--text-secondary);
    font-size: 0.85rem;
  }

  .cv-experience-description,
  .cv-education-description {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: 0.25rem;
  }

  .cv-skills-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .cv-skill-tag {
    background-color: var(--background-color);
    color: var(--text-primary);
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    border: 1px solid var(--border-color);
  }

  .section-item {
    background: var(--background-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    position: relative;
  }

  .section-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .section-item-title {
    font-weight: 600;
    color: var(--text-primary);
  }

  .section-item-subtitle {
    color: var(--text-secondary);
    font-size: 0.9rem;
  }

  .section-item-actions {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
  }

  @media (max-width: 768px) {
    .cv-builder-layout {
      grid-template-columns: 1fr;
    }

    .cv-preview-panel {
      position: relative;
      top: 0;
    }

    .form-row {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %} {% block content %}
<div class="cv-builder-container">
  <div class="cv-builder-header">
    <h1>Create Your Professional CV</h1>
    <p>Build a stunning CV with our intuitive builder and live preview</p>
  </div>

  <div class="cv-builder-layout">
    <!-- Left Panel: CV Form -->
    <div class="cv-form-panel">
      <div class="cv-form-header">
        <h2>CV Details</h2>
      </div>
      <div class="cv-form-body">
        <form id="cv-form" method="post">
          {% csrf_token %}

          <!-- Personal Information -->
          <div class="form-section">
            <h3>Personal Information</h3>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Full Name *</label>
                <input
                  type="text"
                  class="form-control"
                  id="full_name"
                  name="full_name"
                  oninput="updatePreview()"
                  placeholder="John Doe"
                  required
                />
              </div>
              <div class="form-group">
                <label class="form-label">Professional Title *</label>
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  name="title"
                  oninput="updatePreview()"
                  placeholder="Software Developer"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Email *</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  oninput="updatePreview()"
                  placeholder="john@example.com"
                  required
                />
              </div>
              <div class="form-group">
                <label class="form-label">Phone *</label>
                <input
                  type="tel"
                  class="form-control"
                  id="phone"
                  name="phone"
                  oninput="updatePreview()"
                  placeholder="+1-555-123-4567"
                  required
                />
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Location</label>
              <input
                type="text"
                class="form-control"
                id="location"
                name="location"
                oninput="updatePreview()"
                placeholder="San Francisco, CA"
              />
            </div>
            <div class="form-group">
              <label class="form-label">LinkedIn Profile</label>
              <input
                type="url"
                class="form-control"
                id="linkedin"
                name="linkedin"
                oninput="updatePreview()"
                placeholder="linkedin.com/in/johndoe"
              />
            </div>
          </div>

          <!-- Professional Summary -->
          <div class="form-section">
            <h3>Professional Summary</h3>
            <textarea
              class="form-control form-textarea"
              id="summary"
              name="summary"
              oninput="updatePreview()"
              placeholder="Write a compelling summary highlighting your key achievements, skills, and career objectives..."
            ></textarea>
          </div>

          <!-- Work Experience -->
          <div class="form-section">
            <h3>Work Experience</h3>
            <div id="experience-container">
              <div class="section-item">
                <div class="section-item-header">
                  <div>
                    <input
                      type="text"
                      class="form-control"
                      name="experience_title[]"
                      oninput="updatePreview()"
                      placeholder="Job Title"
                      required
                    />
                    <input
                      type="text"
                      class="form-control mt-1"
                      name="experience_company[]"
                      oninput="updatePreview()"
                      placeholder="Company Name"
                      required
                    />
                  </div>
                </div>
                <div class="form-row mt-2">
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      name="experience_duration[]"
                      oninput="updatePreview()"
                      placeholder="Jan 2020 - Present"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      name="experience_location[]"
                      oninput="updatePreview()"
                      placeholder="San Francisco, CA"
                    />
                  </div>
                </div>
                <textarea
                  class="form-control form-textarea mt-2"
                  name="experience_description[]"
                  oninput="updatePreview()"
                  placeholder="Describe your key responsibilities and achievements..."
                ></textarea>
              </div>
            </div>
            <button
              type="button"
              class="btn btn-outline"
              onclick="addExperience()"
            >
              + Add Experience
            </button>
          </div>

          <!-- Education -->
          <div class="form-section">
            <h3>Education</h3>
            <div id="education-container">
              <div class="section-item">
                <div class="section-item-header">
                  <div>
                    <input
                      type="text"
                      class="form-control"
                      name="education_degree[]"
                      oninput="updatePreview()"
                      placeholder="Degree"
                      required
                    />
                    <input
                      type="text"
                      class="form-control mt-1"
                      name="education_school[]"
                      oninput="updatePreview()"
                      placeholder="School/University"
                      required
                    />
                  </div>
                </div>
                <div class="form-row mt-2">
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      name="education_year[]"
                      oninput="updatePreview()"
                      placeholder="2019"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      name="education_location[]"
                      oninput="updatePreview()"
                      placeholder="Location"
                    />
                  </div>
                </div>
              </div>
            </div>
            <button
              type="button"
              class="btn btn-outline"
              onclick="addEducation()"
            >
              + Add Education
            </button>
          </div>

          <!-- Skills -->
          <div class="form-section">
            <h3>Skills & Expertise</h3>
            <input
              type="text"
              class="form-control"
              id="skills"
              name="skills"
              oninput="updatePreview()"
              placeholder="e.g., Python, Django, JavaScript, React, SQL, AWS..."
            />
            <small class="text-muted">Separate skills with commas</small>
          </div>

          <!-- Template Selection -->
          <div class="form-section">
            <h3>Choose Template Style</h3>
            <select
              class="form-select"
              id="template"
              name="template"
              onchange="updatePreview()"
              title="Choose CV template style"
            >
              <option value="modern">Modern - Clean & Professional</option>
              <option value="classic">Classic - Traditional & Elegant</option>
              <option value="minimal">Minimal - Simple & Focused</option>
              <option value="creative">Creative - Stylish & Unique</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary btn-lg w-100">
            Save & Preview CV
          </button>
        </form>
      </div>
    </div>

    <!-- Right Panel: Live Preview -->
    <div class="cv-preview-panel">
      <div class="cv-preview-header">
        <h2>Live Preview</h2>
        <button class="btn btn-outline" onclick="downloadPDF()">
          <i class="fas fa-download"></i> Download PDF
        </button>
      </div>
      <div class="cv-preview-body">
        <div id="cv-preview" class="cv-template">
          <!-- Preview will be dynamically updated here -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function updatePreview() {
    const fullName = document.getElementById('full_name').value || 'Your Name';
    const title = document.getElementById('title').value || 'Your Title';
    const email =
      document.getElementById('email').value || 'your.email@example.com';
    const phone = document.getElementById('phone').value || '+1-555-000-0000';
    const location =
      document.getElementById('location').value || 'Your Location';
    const linkedin = document.getElementById('linkedin').value || '';
    const summary =
      document.getElementById('summary').value ||
      'Your professional summary will appear here...';
    const skills =
      document.getElementById('skills').value || 'Skills will appear here...';
    const template = document.getElementById('template').value;

    // Get experience items
    const experienceItems = [];
    const experienceTitles = document.querySelectorAll(
      'input[name="experience_title[]"]'
    );
    const experienceCompanies = document.querySelectorAll(
      'input[name="experience_company[]"]'
    );
    const experienceDurations = document.querySelectorAll(
      'input[name="experience_duration[]"]'
    );
    const experienceLocations = document.querySelectorAll(
      'input[name="experience_location[]"]'
    );
    const experienceDescriptions = document.querySelectorAll(
      'textarea[name="experience_description[]"]'
    );

    for (let i = 0; i < experienceTitles.length; i++) {
      if (experienceTitles[i].value || experienceCompanies[i].value) {
        experienceItems.push({
          title: experienceTitles[i].value || 'Job Title',
          company: experienceCompanies[i].value || 'Company',
          duration: experienceDurations[i].value || 'Duration',
          location: experienceLocations[i].value || 'Location',
          description: experienceDescriptions[i].value || 'Description...',
        });
      }
    }

    // Get education items
    const educationItems = [];
    const educationDegrees = document.querySelectorAll(
      'input[name="education_degree[]"]'
    );
    const educationSchools = document.querySelectorAll(
      'input[name="education_school[]"]'
    );
    const educationYears = document.querySelectorAll(
      'input[name="education_year[]"]'
    );
    const educationLocations = document.querySelectorAll(
      'input[name="education_location[]"]'
    );

    for (let i = 0; i < educationDegrees.length; i++) {
      if (educationDegrees[i].value || educationSchools[i].value) {
        educationItems.push({
          degree: educationDegrees[i].value || 'Degree',
          school: educationSchools[i].value || 'School',
          year: educationYears[i].value || 'Year',
          location: educationLocations[i].value || 'Location',
        });
      }
    }

    // Generate preview HTML
    let previewHTML = `
        <div class="cv-template">
            <div class="cv-header">
                <h1 class="cv-name">${fullName}</h1>
                <h2 class="cv-title">${title}</h2>
                <div class="cv-contact">
                    ${email} • ${phone} • ${location}
                    ${
                      linkedin
                        ? ` • <a href="${linkedin}" style="color: var(--primary-color);">${linkedin}</a>`
                        : ''
                    }
                </div>
            </div>

            ${
              summary
                ? `
            <div class="cv-section">
                <h3 class="cv-section-title">Professional Summary</h3>
                <p class="cv-summary">${summary}</p>
            </div>
            `
                : ''
            }

            ${
              experienceItems.length > 0
                ? `
            <div class="cv-section">
                <h3 class="cv-section-title">Work Experience</h3>
                ${experienceItems
                  .map(
                    (item) => `
                    <div class="cv-experience-item">
                        <div class="cv-experience-title">${item.title}</div>
                        <div class="cv-experience-company">${item.company}</div>
                        <div class="cv-experience-duration">${
                          item.duration
                        } • ${item.location}</div>
                        ${
                          item.description
                            ? `<div class="cv-experience-description">${item.description}</div>`
                            : ''
                        }
                    </div>
                `
                  )
                  .join('')}
            </div>
            `
                : ''
            }

            ${
              educationItems.length > 0
                ? `
            <div class="cv-section">
                <h3 class="cv-section-title">Education</h3>
                ${educationItems
                  .map(
                    (item) => `
                    <div class="cv-education-item">
                        <div class="cv-education-title">${item.degree}</div>
                        <div class="cv-education-school">${item.school}</div>
                        <div class="cv-education-duration">${item.year} • ${item.location}</div>
                    </div>
                `
                  )
                  .join('')}
            </div>
            `
                : ''
            }

            ${
              skills
                ? `
            <div class="cv-section">
                <h3 class="cv-section-title">Skills & Expertise</h3>
                <div class="cv-skills-list">
                    ${skills
                      .split(',')
                      .map(
                        (skill) => `
                        <span class="cv-skill-tag">${skill.trim()}</span>
                    `
                      )
                      .join('')}
                </div>
            </div>
            `
                : ''
            }
        </div>
    `;

    document.getElementById('cv-preview').innerHTML = previewHTML;
  }

  function addExperience() {
    const container = document.getElementById('experience-container');
    const newItem = document.createElement('div');
    newItem.className = 'section-item';
    newItem.innerHTML = `
        <div class="section-item-header">
            <div>
                <input type="text" class="form-control" name="experience_title[]" 
                       oninput="updatePreview()" placeholder="Job Title" required>
                <input type="text" class="form-control mt-1" name="experience_company[]" 
                       oninput="updatePreview()" placeholder="Company Name" required>
            </div>
            <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeItem(this)">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="form-row mt-2">
            <div class="form-group">
                <input type="text" class="form-control" name="experience_duration[]" 
                       oninput="updatePreview()" placeholder="Jan 2020 - Present" required>
            </div>
            <div class="form-group">
                <input type="text" class="form-control" name="experience_location[]" 
                       oninput="updatePreview()" placeholder="San Francisco, CA">
            </div>
        </div>
        <textarea class="form-control form-textarea mt-2" name="experience_description[]" 
                  oninput="updatePreview()" 
                  placeholder="Describe your key responsibilities and achievements..."></textarea>
    `;
    container.appendChild(newItem);
    updatePreview();
  }

  function addEducation() {
    const container = document.getElementById('education-container');
    const newItem = document.createElement('div');
    newItem.className = 'section-item';
    newItem.innerHTML = `
        <div class="section-item-header">
            <div>
                <input type="text" class="form-control" name="education_degree[]" 
                       oninput="updatePreview()" placeholder="Degree" required>
                <input type="text" class="form-control mt-1" name="education_school[]" 
                       oninput="updatePreview()" placeholder="School/University" required>
            </div>
            <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeItem(this)">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="form-row mt-2">
            <div class="form-group">
                <input type="text" class="form-control" name="education_year[]" 
                       oninput="updatePreview()" placeholder="2019">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" name="education_location[]" 
                       oninput="updatePreview()" placeholder="Location">
            </div>
        </div>
    `;
    container.appendChild(newItem);
    updatePreview();
  }

  function removeItem(button) {
    button.closest('.section-item').remove();
    updatePreview();
  }

  function downloadPDF() {
    alert(
      'PDF download functionality will be implemented with a PDF generation service'
    );
  }

  // Initialize preview on page load
  document.addEventListener('DOMContentLoaded', function () {
    updatePreview();
  });
</script>
{% endblock %}
